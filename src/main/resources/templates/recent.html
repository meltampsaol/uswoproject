<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>

</head>

<body>
    <table class="table">
        <thead>
            <tr>
                <th>Date Purchased</th>
                <th>Description</th>
                <th>Amount Requested</th>
                <th>Actual Expenses</th>
                <th>Remarks</th>
            </tr>
        </thead>
        <tbody>

            <tr th:each="expense : ${expenses}">
                <td th:text="${expense.datePurchased}"></td>
                <td th:text="${expense.description}"></td>
                <td th:text="${expense.amountRequested}"></td>
                <td th:text="${expense.actualExpenses}"></td>
                <td th:text="${expense.remarks}"></td>
                <td>
                    <a th:href="@{/expenses/edit/{id}(id=${expense.recid})}" class="btn btn-primary">Edit</a>
                </td>
                <td>
                    <form th:action="@{/expenses/delete/{id}(id=${expense.recid})}" method="post"
                        id="deleteExpenseForm">
                        <button type="button" class="btn btn-danger" data-toggle="modal"
                            data-target="#deleteModal">Delete</button>
                    </form>
                </td>
                <td>
                    <button class="btn btn-sm btn-primary edit-btn" data-toggle="modal" data-target="#editExpenseModal" data-expense-id="${expense.id}">Edit</button>
                </td> 
            </tr>

            </tr>


        </tbody>
    </table>
    <div class="modal fade" id="editExpenseModal" tabindex="-1" role="dialog" aria-labelledby="editExpenseModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="editExpenseModalLabel">Edit Expense</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form id="editExpenseForm" th:action="@{/expenses/update}" method="post">
                <input type="hidden" id="editExpenseId" name="id" th:value="${expense.id}">
                <div class="form-group">
                  <label for="editDistrict">District:</label>
                  <select class="form-control" id="editDistrict" name="district.did" required>
                    <option value="" selected>Select District</option>
                    <option th:each="district : ${districts}" th:value="${district.did}" th:text="${district.district}"></option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="editLokal">Lokal:</label>
                  <select
                  class="form-control" id="editLokal" name="lokal" required>
                  <option value="" selected>Select Lokal</option>
                  </select>
                  </div>
                  <div class="form-group">
                  <label for="editWkno">Week Number:</label>
                  <input type="text" class="form-control" id="editWkno" name="wkno" pattern="[0-9]{2}-[0-9]{4}" th:value="${expense.wkno}" required>
                  <div class="invalid-feedback">
                  Please enter a valid week number (week-yyyy).
                  </div>
                  </div>
                  <div class="form-group">
                  <label for="editDescription">Description:</label>
                  <textarea class="form-control" id="editDescription" name="description" required th:text="${expense.description}"></textarea>
                  </div>
                  <div class="form-group">
                  <label for="editF10">F10:</label>
                  <input type="text" class="form-control" id="editF10" name="f10" required th:value="${expense.f10}">
                  </div>
                  <div class="form-group">
                  <label for="editAmountRequested">Amount Requested:</label>
                  <input type="number" class="form-control" id="editAmountRequested" name="amountRequested" min="0" required th:value="${expense.amountRequested}">
                  </div>
                  <div class="form-group">
                  <label for="editActualExpenses">Amount:</label>
                  <input type="number" class="form-control" id="editActualExpenses" name="actualExpenses" min="0" required th:value="${expense.actualExpenses}">
                  </div>
                  <div class="form-group">
                  <label for="editDatePurchased">Date Purchased:</label>
                  <input type="date" class="form-control" id="editDatePurchased" name="datePurchased" required th:value="${expense.datePurchased}">
                  </div>
                  <div class="form-group">
                  <label for="editRemarks">Remarks:</label>
                  <textarea class="form-control" id="editRemarks" name="remarks" th:text="${expense.remarks}"></textarea>
                  </div>
                  <div class="form-group">
                  <label for="editQty">Quantity:</label>
                  <input type="number" class="form-control" id="editQty" name="qty" min="0" required th:value="${expense.qty}">
                  </div>
                  <div class="form-group">
                  <label for="editExpenseType">Expense Type:</label>
                  <select class="form-control" id="editExpenseType" name="exptype" required>
                  <option value="" selected>Select Expense Type</option>
                  <option value="Locale" th:selected="${expense.exptype == 'Locale'}">Locale</option>
                  <option value="Central" th:selected="${expense.exptype == 'Central'}">Central</option>
                  </select>
                  </div>
                  </form>
                  </div>
                  <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-primary" id="editExpenseButton">Save Changes</button>
                  </div>
                  </div>
                  
                    </div>
                  </div> 
                 
</body>

</html>