<!DOCTYPE html>
<html>
<head>
  <title>Edit Expense</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>
<body>
  <div class="container">
    <h1>Edit Expense</h1>
    <form id="editExpenseForm" method="post" action="/expenses/update">
      <input type="hidden" name="recid" value="${expense.recid}">
      <div class="form-group">
        <label for="editDistrict">District:</label>
        <select class="form-control" id="editDistrict" name="district.did" required>
          <option value="" selected>Select District</option>
          <option th:each="district : ${districts}" th:value="${district.did}"
                  th:text="${district.district}"
                  th:selected="${district.did == expense.district.did}"></option>
        </select>
      </div>
      <div class="form-group">
        <label for="editLokal">Lokal:</label>
        <select class="form-control" id="editLokal" name="lokal" required>
          <option value="" selected>Select Lokal</option>
          <option th:each="lokal : ${lokals}" th:value="${lokal}"
                  th:text="${lokal}"
                  th:selected="${lokal == expense.lokal}"></option>
        </select>
      </div>
      <div class="form-group">
        <label for="editWkno">Week Number:</label>
        <input type="text" class="form-control" id="editWkno" name="wkno" pattern="[0-9]{2}-[0-9]{4}"
               th:value="${expense.wkno}" required>
        <div class="invalid-feedback">
          Please enter a valid week number (week-yyyy).
        </div>
      </div>
      <div class="form-group">
        <label for="editDescription">Description:</label>
        <textarea class="form-control" id="editDescription" name="description" required
                  th:text="${expense.description}"></textarea>
      </div>
      <div class="form-group">
        <label for="editF10">F10:</label>
        <input type="text" class="form-control" id="editF10" name="f10" required th:value="${expense.f10}">
      </div>
      <div class="form-group">
        <label for="editAmountRequested">Amount Requested:</label>
        <input type="number" class="form-control" id="editAmountRequested" name="amountRequested" min="0" required
               th:value="${expense.amountRequested}">
      </div>
      <div class="form-group">
        <label for="editActualExpenses">Amount:</label>
        <input type="number" class="form-control" id="editActualExpenses" name="actualExpenses" min="0" required
               th:value="${expense.actualExpenses}">
      </div>
     
        <div class="form-group">
            <label for="editRemarks">Remarks:</label>
            <textarea class="form-control" id="editRemarks" name="remarks"
                      th:text="${expense.remarks}"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Update Expense</button>
          <a href="/expenses" class="btn btn-secondary">Cancel</a>
        </form>
      </div>
      <script>
        $(document).ready(function() {
          // Set the value of the district dropdown to the district of the expense being edited
          var selectedDistrict = "${expense.district.did}";
          $("#editDistrict").val(selectedDistrict);
    
          // Set the value of the lokal dropdown to the lokal of the expense being edited
          var selectedLokal = "${expense.lokal}";
          $("#editLokal").val(selectedLokal);
        });
      </script>
    </body>
    </html>
    